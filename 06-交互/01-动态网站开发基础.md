[TOC]



## 什么是网站

- 可以在浏览器上通过一个地址直接访问（搭建WEB服务器）
- 用于提供一种（或多种）特定服务的，一系列具备相关性的网页组合的整体
- 如：博客、门户、电商、在线教育等
- 核心：渲染页面、表单处理、状态保持session

## 网站开发的前提知识

但只能做网页、给页面加上些动态的交互。

路线：网页开发->网站开发（呈现些文章、商品等内容 ）->应用开发（如百度脑图）

1.硬性知识：

- HTML——网页内容结构（GUI图形化用户界面）

  CSS——网页外观样式（GUI）

- JavaScript——编程语言（可用于调用浏览器提供的API）

- Web APIs——网页交互（界面功能）

- JQuery——便捷手段，非必要

2.软性知识：编程思想——我目前有什么，我要做什么

3.想做完整的网站，还需要学的知识：

- 搭建WEB服务器（提供网站服务的机器）
  - 服务器（提供服务）：一台安装特定软件的公共计算机；
  - 客户端（使用服务）：在一次服务过程中使用这个服务的设备（网络端点）
- HTTP（浏览器与服务端的通讯 协议）
- 服务端开发（动态网页技术）
  - 由于网页的共性与局部性，要通过只写一个页面往里添加不同的数据，达到感觉是不同页面的效果
- 数据库操作（服务端 存储数据 方式）
- AJAX（浏览器与服务端的数据交互方式）：使交互更加友好
- 现阶段企业需要：敏捷开发（接口化开发）

## 网站开发步骤

理想状态下。不要明确给自己划范围

1. 需求分析：（运营人员/使用者提出）分析我们这个应用程序到底要去做哪些功能，去应对(满足)哪些业务。（输入：老板的一句话，输出：**需求说明文档**，用xmind/word/excel。发布页（后台）功能、展示页（前台）功能都有哪些）
2. 原型设计：根据需求分析的结果规划应用程序的原型，可以理解为“打草稿”（花不了太多的时间，收效是很大的）。（产品经理：以什么样的界面才能满足需求，做出网页的大致轮廓。画界面**草图**（原型图）、配些原型说明（如UE流程图，移动端涉及多）。专业软件如：Axure（pc端）/墨刀（移动端）。产物：原型图和原型说明）
3. UI 设计：将“草稿”转换为设计稿（草稿图、线框图（有尺寸）、设计稿（填充具体内容）），并提供相应的产物（产物：**设计稿、静态页面**）。（UI设计师，专业软件如：PS/AI/FW/ Sketch(mac的)）。往下就是开发人员负责。
4. 技术选型：根据业务场景（业务需求）分别选择对应的技术栈（输入：需求分析说明书，输出：**数据库技术栈、后端技术栈、前端技术栈**），一般考虑的因素：人（架构师或技术好的人做，最重要，会哪些技术）、业务（业务需求要求学些技术）。一般只会选一次。
5. 数据库设计：根据需求和原型分析我们有哪些类型的数据需要存，从而得到我们数据库的**基本结构**。（DBA或后端开发人员，由某专业工具画）至于前端：只需要知道每个表的目的及数据组成。具体：所有配置选项的东西都放在Options表name、value，与其它表没有联系。每个表都要有id，做增删改查操作。除了Options每个表都有个slug：用英文名让url地址变得更加有意义，对SEO更加友好。Posts文章（发表物）
6. 项目架构设计：俗称搭架构，其中具体的操作主要就是制定项目规范约束（如文件该放哪？代码写的规范？如js的流行规范：谷歌js规范、airbnb javascript 规范）、创建基本的项目结构、编写基础的公共模块代码和组织代码。（产物：项目结构、项目约束文档、项目基本结构说明文档（基础公共代码有哪些？你可以调用哪些方法实现什么功能））（架构师）
7. 业务迭代开发：开发者的日常，基于项目架构（条条框框）下完成各项业务功能。（开发者）
8. 集中测试：将所有功能模块整合到一起过后，集中测试业务功能是否有 BUG，是否满足需求。（测试师）
9. 部署上线：从开发环境向生产环境转换，就是把应用部署到服务器上。（运维人员）

## 网站开发的一般项目架构（目录）

学习时：将前后台都放一个文件夹。

怎么做以下文件：命令行进入目录，tree，加这些点做个说明

└── baixiu ······································ 项目文件夹（网站根目录）
    ├── admin ··································· 后台文件夹
    │   └── index.php ··························· 后台脚本文件
    ├── static ·································· 静态文件夹
    │   ├── assets ······························ 资源文件夹
    │   └── uploads ····························· 上传文件夹
    └── index.php ······························· 前台脚本文件

开发实际项目时：将前后台分开放。

一些具体操作：

- 先明确一共有多少个页面

- 一个页面就对应一个 php 文件去处理

- static文件夹中 静态文件的处理（整合静态文件）：

  ```
  └── baixiu ···························· 项目文件夹（网站根目录）
      ├── ......
      ├── static ······················ 静态文件夹
      │   ├── assets ·················· 资源文件夹
  +   │   │   ├── css ················· 样式文件夹
  +   │   │   ├── img ················· 图片文件夹
  +   │   │   ├── js ·················· 脚本文件夹
  +   │   │   └── venders ············· 第三方资源
      │   └── uploads ················· 上传文件夹
  +   │       └── 2017 ········ 2017 年上传文件目录
      ├── ......
  ```

  - `static` 目录中只允许出现静态文件。
  - `assets` 目录中放置网页中所需的资源文件。
  - `uploads` 目录中放置网站运营过程中上传的文件，如果担心文件过多，可以按年归档（一年一个文件夹）。


## 常见的几套技术方案搭配

这里我们选择 PHP 作为了解服务端动态网页开发的技术方案。

PHP->nodejs

技术方案1：

服务端：PHP+MySQL;

客户端：jQuery+一些插件（Bootstrap+plugin+NProgress功能组件库或UI组件库）、HTML那些就不提了

## *请求响应过程（web工作流程）

了解整个WEB是怎样运转的？从浏览器输入一个地址发起对网站的请求整个过程发生了什么？

> 注意：服务端不是返回文件，而是返回执行后的结果

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B.png)

1. 用户打开**浏览器**

2. 地址栏输入我们需要访问的网站**网址**（URL） 

3. 浏览器通过 DNS 服务器获取即将访问的网站 IP **地址** 

4. 浏览器发起一个对这个 IP 的**请求**

5. 服务端接收到这个请求，进行相应的**处理** 

6. 服务端将处理完的**结果**返回给客户端浏览器（间接）

7.  浏览器将服务端返回的结果**呈现到界面上**

  > 注意：这是静态文件的过程，看下面

## *静态网页与动态网页的区别

静态网页：将代码原封不动地呈现。 满足不了**内容会随着数据动态变化（这就是动态）** 的需求。过程：Apache 找到你请求对应的文件 → 读取文件 → 将文件内容响应给客户端浏 览器（文件原封不动的给你）

服务端动态网页：不再将HTML固定写死，每次用户请求时，服务端动态执行一段代码，**临时生成一个用户想要的HTML页面**（即每次请求时服务端动态生成HTML返回给用户的这种网站） 。是动态变化的

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/%E5%8A%A8%E6%80%81%E7%BD%91%E7%AB%99.png)

比一般请求响应过程多的阶段——判断机制：是否为静（动）态文件。（注意：找其它程序按一定规律执行代码，如PHP）

> 实现服务端动态网页的技术有很多种：JSP、ASP.NET、PHP、Node 等等。
>
> 这里我们选择 PHP 作为了解服务端动态网页开发的技术方案。
>

### Apache与PHP的关系

Apache——是根据文件的扩展名找到文件的类型然后挨个询问每个模块能否处理这个类型的文件，如果这些模块都不能处理那么apache就自己处理（按照静态文件的方式处理）

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/apache10.png)

### 配置 PHP 支持 

但真正开发时，配环境：不会一个个装，而是直接用集成环境去装（将apche、php、mysql等全部装好）。而初学：不这样做，是因为容易把这些软件的职责搞乱

> 实验：尝试在网站中添加一个扩展名为 php 的文件，然后到浏览器中访问它。
>
> 实验结果：并没有显示我们想要的 Hello PHP ，而是将代码原封不动的返回给浏览器了。
>
> ```
> <!‐‐ demo.php ‐‐> 
> <?php echo 'Hello PHP'; ?>
> ```
>
> 原因很简单：Apache 只能处理静态文件请求，对于后缀名为 .php 这种动态文件，它无法执行，所以就当成是一 个静态文件直接返回了。

解决方法——配置PHP支持：解压php->loadmodule->addtype

1. 下载PHP，在服务器（电脑）上安装 PHP 

   1. 解压 php 到纯英文路径目录中 （PHP是辅助工具，放这就好，剩下是Apache的事）

   > 你可以理解为：Apache 是一家没有太多能力的公司，只能处理一些简单的业务（静态网站），但是心很大想 做更多的事（动态网站），所以就想到了外包，所有额外的业务都需要外包给其他程序，而 PHP 就是理解为 一个专门能够处理 php 业务的外包公司

2. 在 Apache 中添加支持 PHP 的配置  

   1. 在 Apache 的配置文件httpd.conf，找到添加位置，添加 PHP 处理模块（如果目录有空格，给目录加“”）

      ```
      # php support LoadModule php7_module C:/Develop/php/php7apache2_4.dll
      ```

   2. 在 <IfModule mime_module> 节点中添加 .php 扩展名解析支持（因为PHP不根据后缀判断是否工作，是根据MIME Type工作：如text/html。在conf/mime.types中没有将这类型与扩展名关联，所以要加载）

      ```
      # parse .php files 
      AddType application/x‐httpd‐php .php
      ```

   3. 默认文档配置节点 <IfModule dir_module> 中添加 index.php

      ```
      <IfModule dir_module>     
      	DirectoryIndex index.html index.php </IfModule>
      ```

注意：php代码与html代码 

- php不会受html执行的影响。
- 什么时候执行：PHP在服务器运行环境执行。html在浏览器执行。
- php执行时只关心字符串。

## *搭建WEB服务器

- 服务器（提供服务）：一台安装特定软件的公共计算机；
- 客户端（使用服务）：在一次服务过程中使用这个服务的设备（网络端点）

### web服务器软件的常见搭配

Nginx ········································ 反向代理 

Apache ····································· PHP 

IIS ·············································· ASP.NET

 Tomcat  ····································· Java

### 安装web服务器软件——Apache

1. 这儿安装的Web 服务器软件是：Apache HTTP Server。

2. 由于我们安装的是解压版，需要自己进行一些配置

   下载地址：https://www.apachelounge.com/download/ 

   使用说明：https://httpd.apache.org/docs/current/platform/windows.html

3. （打开bin，运行Monitor.exe可查看服务器状态。）

   配置：安装Apache服务

   ```
   # 注意：需要使用管理员身份运行命令行
   # 切换到 Apache 解压路径中的 bin 目录
   $ cd <解压目录>/bin
   # 安装Apache服务，‐n参数是指定服务名称,可省略 .exe也可省略
   $ httpd.exe ‐k install ‐n "Apache"
   # 如果需要卸载 Apache，可以执行以下命令 $ httpd.exe ‐k uninstall ‐n "Apache"
   ```

   执行安装命令过后会报一个错，原因:默认的配置文件有问题，需要先调整一下配置文件 conf/httpd.conf ，才能 正常启动服务。

   ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/apa1.png)

   找到 Apache 解压目录中的 conf 目录下的 httpd.conf 文件，定位到 37 行，将 c:/Apache24 改为解压目录，我这 里解压到路径是 C:/Develop/apache ，所以我这里修改

   ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache2.png)

   修改完以后，执行以下命令重新测试配置文件是否通过。

   ```
   $ httpd.exe -t
   ```

   仍会报错：

   ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache3.png)

   通过错误信息得知，这里是因为另外一个地方配置的目录不存在导致的，所以接着调整 246 行的 DocumentRoot 选项：

   ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache4.png)

   随即，我们发现这个配置文件中有很多默认配置选项中的路径都是 c:/Apache24 ，所以我们批量都修改为我们解 压的目录路径

   然后重新执行 httpd.exe -t 测试配置文件，这时候应该提示 Syntax OK 。（会有个ServerName 的警告提示，但不用管它）

   接着运行以下命令重新启动 Apache 服务：
   
   ```cmd
   # 注意：需要使用管理员身份运行命令行！！！ $ httpd.exe ‐k start ‐n "Apache" 
   # 重新启动 Apache 服务或服务里重启或Monitor操作
   $ httpd.exe ‐k restart ‐n "Apache"
   # 停止 Apache 服务或服务器停止或Monitor操作
$ httpd.exe ‐k stop ‐n "Apache"
   ```
   
   回到浏览器中，地址栏输入：http://localhost/，回车访问，这时正常应该看到 It works!   配置成功！

### Apache常见配置：

> 相关文件：配置文件apache/httpd.conf、 Apache 的虚拟主机配置文件apache/conf/extra/httpd-vhosts.conf
>
> 可以把apache、etc加入快速访问。
>
> 配置说明文档：http://httpd.apache.org/docs/current/
> 配置文件中行首的 # 指的是注释
> 注意：以下所记录的行号仅供参考，不同版本的配置文件可能不尽相同。
>
> 改完配置文件后，最好先测试下：httpd -t，后重启服务

#### 监听端口 

监听端口可以随意修改为任意一个未被其他程序监听的端口，可以通过设置**配置文件 httpd.conf 中的** Listen 指令后面的数字修改:**Listen 端口号**。可以配多个端口

#### 网站根目录 

如果需要设置网站根目录，可以通过修改配置文件 **httpd.conf 中的网站根目录选项**切换。（改下图2行即可，第二行意思：是否允许/禁止访问磁盘根目录。前面有个全禁止访问，这儿覆盖掉它）

若没切换过来，就shift+f5、ctrl+shift+R刷新缓存

注意/而非\

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache5.png)

默认 Apache 的网站根目录是安装目录中的 htdocs 文件夹，为了方便对网站文件的管理，一般我们会将其设置在 一个自定义目录中（如果你不介意其实不修改也无所谓）。

> 网站根目录就是存放我们网站文件的最顶层目录，通常 URL 中域名后面的第一个斜线对应（映射）的就是网站根目录。
> 注：动态网站情况会比较特殊，需要单独考虑，不一定是这个规则

#### 默认文档

配置文件 httpd.conf 的 280 行的 DirectoryIndex ，默认文档可以配置多个（由前到后依次去找，找到为止，如果没找到任何一个则**启用目录浏览**）：

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache6.png)

那怎么关掉目录浏览呢？Directory节点中的 Options Indexes FollowSymLinks去掉Indexes

> 当客户端访问的是一个目录而不是具体文件时，服务端默认返回这个目录下的某个文档（文件），这个文档就称为默认文档。

#### *虚拟主机

想在一台机器上部署多个apache站点，就必须配置虚拟主机，将一个网站分成多个网站。

> 由于后期对虚拟主机的配置操作非常常见，所以我们一般将虚拟主机的配置单独放到一个配置文件中，然后 在主配置文件中引入，避免破坏主配置文件中的其他配置。
> Include conf/extra/httpd-vhosts.conf 配置的作用就将另外一个配置文件引入（使其生效）
>
> 大概过程：取消注释、添加配置（多虚拟主机时注意添加允许访问磁盘根目录Directoy节点，否则出现Forbidden）、修改hosts。注意配置完先测试再重启

具体操作：在主配置文件 httpd.conf 的 505 行取消注释：

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache7.png)

然后找到 Apache 的虚拟主机配置文件apache/conf/extra/httpd-vhosts.conf，添加一个如下的虚拟主机配置节点，然后重新启动 Apache。

> 这个文件中有两个默认的示例配置，可以注释掉保留给以后参考（ctrl+shift+↑/↓或按住滚轮 多行注释）
>
> 大胆改，在原始文件apache/conf/original有这些配置文件的初始状态
>
> 虚拟主机也有：根目录、默认文件、目录浏览等信息
>
> 由于多个虚拟主机一同工作，每一个虚拟主机必须配置 ServerName（访问的域名）
>
> 要多个域名访问同一网站，可以起个别名，别名一般加www前缀。
>
> 注意/，而不是\

![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apa8.png)

因为域名要买，如果不买而真的要使用 baixiu.com 这个域名的话，就只能通过修改 hosts 文件达到目的（注意：一定要在浏览器第一次请求去修改hosts，不然会缓存，修改就不起作用了）。原因很简单：这个域名不是 我们自己的，我们没有办法修改这个域名在公网上的 DNS。

> 注意：
> 如果使用了虚拟主机，则默认全部使用虚拟主机，即之前的默认网站也必须通过虚拟主机方式配置，否则访问不到。(如使用localhost不会访问默认主机，而会访问第一个虚拟主机。)参考：http://skypegnu1.blog.51cto.com/8991766/1532454 
>
> 起奇葩后缀，如.abcd,会跳到搜索引擎搜索而不会去访问。
>
> 如果虚拟主机的端口使用的不是 80 ，则需要在主配置文件中添加一个对这个端口的监听：
>
> ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/Apache9.png)
>
> Forbidden情况：多虚拟主机时注意**添加**允许访问磁盘根目录**Directoy节点**，否则出现Forbidden

### Apache常用命令：

（打开apache/bin，运行Monitor.exe可查看服务器状态。）

```cmd
# 测试 Apache 服务，但要到apache的bin目录下
$ httpd ‐t
# 重新启动 Apache 服务
$ httpd ‐k start
# 停止 Apache 服务 
$ httpd ‐k stop
```



## 网络基本概念

### IP地址（对移动WEB关键）

设备在某一个网络中的地址。

如果没有连接网络设备，会有个本地回环地址：127.0.0.1，指向本机。而localhost是该地址对应 主机名（虚拟域名/虚拟主机名），指向当前本机。

目前最常见的格式： [0-255].[0-255].[0-255].[0-255]。

> 也叫端点。
>
> 只要连在网络设备上的其中一条网线接口上，网络设备就会给它分配一个IP地址。也就是说电脑想要有IP，必须要有个网络设备的连接。
>
> 你想访问别人电脑，别人电脑就该跟你处于共同环境（怎么看？网络中心->以太网->详细信息->IPV4地址。你和别人的IP地址相同的就是前三部分（网段），这就是我们处于相同网段，当处于同一网段（单个网络情况），你访问别人的IPV4才能成功。而自己的整个IP地址也指向本机，若访问不到，防火墙->高级设置->入站规则->apache->启动或防火墙关了。但对于放在服务器上的网站，防火墙不能关）
>
> 多网情况为啥不能无视网段访问别人计算机？不能访问原因：1.请求到了交换器而不是到你机器2.80端口直接被电信掐掉了。
>
> ![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/IP%E5%9C%B0%E5%9D%801.png)

### 域名

由于 IP 地址很难记，所以就有人想出来要给 IP 起名字 （别名）。

> 域名是需要花钱注册的。后缀不一样价格不一样。

### DNS

简单说：把指定域名指向哪个IP的这个过程存在一个公共地方，这个公共地方就是DNS服务器。

具体说：通过宽带运营商提供的服务器解析一个域名背后对应的 IP，这个过程叫做 **DNS 寻址**。帮你完成 DNS 寻址过程的 服务器叫做 **DNS 服务器**。

#### DNS具体操作

登陆阿里云等域名网站->域名与网站->云解析DNS->挑个域名添加解析即可

####  hosts 文件 

简单说：若该文件包含对要解析域名的配置，就不去请求DNS服务器。可以自己给域名分配IP地址。

具体说：操作系统在发起对 DNS 服务器的查询请求之前，会优先检查本机的 hosts 文件。如果这个文件中包含了对当前需要解析的域名的配置，则不再发起对 DNS 服务器的请求，直接使用 hosts 文件中的配置。
**文件所在路径：**
Windows： C:\Windows\System32\drivers\etc\hosts macOS： /etc/hosts

**配置方法：**（键值对）

以管理员方式运行；向hosts文件添加：**IP地址 域名**

（权限不要改。那怎么改文件权限？右击文件，属性，安全，给USER添加权限）

> 注意：本机的hosts只能影响本机的DNS寻址。

### 端口

计算机本身是一个封闭的环境，就像是一个大楼，如果需要有数据通信往来，必须有门，这个门在术语中就叫端 口，每一个端口都有一个编号，每台计算机只有 65536 个端口（0-65535）。一般我们把“占门”的过程叫做监听。

> 但0这个端口用不了，这是计算机自己用的

#### 监视本机端口使用情况：netstat -an

如apache等web服务器软件一般占用80端口，因为只有80端口才不用在url里写"：具体端口"。要写这些的一般都是不想让你访问的网站，如公司内网系统

> 参考链接：
> https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3 常见服务器端口应用占用情况
>
> https://baike.baidu.com/item/%E7%AB%AF%E5%8F%A3 
>
> http 默认的端口 80 
>
> https 默认的端口是 443

### URL

URL（Uniform Resource Locator），统一资源定位符，通俗点来说就是表示网络当中某一个网页的完整访问地址，它具有一定的格式：![](https://raw.githubusercontent.com/hongbinxie/pic-bad/master/img/urlForm.png)

例如：https: //zce.me:80 /schools/students? id=18&name=zce# photo

协议 主机(域名|主机名) 请求路径 请求参数 锚链值

#  自测

安装 Apache 并配置，确保本机可以访问。

 相互访问自己与室友提供的 Web 服务。 

让 Apache 支持 php 文件的运行。 

可以配置网站的默认文档。